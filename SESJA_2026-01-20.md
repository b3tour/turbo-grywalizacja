# Sesja 2026-01-20 - Turbo Grywalizacja

## Co zostalo zrobione

### 1. Utworzono nowy projekt Turbo Grywalizacja
- Skopiowano z turbo-challenge do nowego folderu `turbo-grywalizacja`
- Zmieniono branding: "Turbo Challenge" -> "Turbo Grywalizacja"
- Zaktualizowano package.json, manifest.json, metadata

### 2. Baza danych Supabase
- **Projekt:** https://pdyfxdjmebyfiucwgtco.supabase.co
- **Schemat:** Uruchomiono `supabase/schema.sql` z:
  - Tabela `teams` (5 druzyn: Turbo Racers, Speed Demons, Power Squad, Nitro Force, Thunder Team)
  - Tabela `users` z kolumna `team_id` (zamiast `class`)
  - Triggery automatycznej aktualizacji XP druzyny
  - Polityki RLS
  - Przykladowe misje i osiagniecia

### 3. Kod aplikacji
- Hook `useTeams` do zarzadzania druzynami
- Komponenty: TeamCard, TeamBadge, TeamLeaderboard, TeamMembersList
- Strony: `/teams`, `/teams/[id]`
- Panel admina z zakladka "Druzyny" do przypisywania userow
- Nawigacja: zamieniono "Ranking" na "Druzyny"
- Tailwind config z kolorami druzyn

### 4. Deploy
- **GitHub:** https://github.com/b3tour/turbo-grywalizacja
- **Vercel:** https://turbo-grywalizacja.vercel.app
- **Zmienne srodowiskowe:** Skonfigurowane w Vercel

### 5. Naprawione bledy
- Zmieniono `class` na `team_id` w useAuth.tsx (linie 59, 281, 295)
- Zaktualizowano branding we wszystkich plikach

---

## AKTUALNY PROBLEM

Aplikacja zawiesza sie na "Ladowanie..." z bledem w konsoli:
```
Auth initialization error: Error: Auth timeout
```

### Co juz sprawdzono:
- Supabase dziala (SQL query `SELECT COUNT(*) FROM teams` zwraca 5)
- Schemat bazy danych jest poprawny
- Kod nie ma juz odwolan do starej kolumny `class`

### Co trzeba sprawdzic:
1. **Zmienne srodowiskowe w Vercel** - czy nie ma spacji, czy klucze sa poprawne
2. **Redeploy z Clear cache** w Vercel
3. **DevTools -> Network** - czy requesty do supabase.co sa czerwone (bledy)?
4. **Supabase Authentication -> URL Configuration** - czy Site URL = `https://turbo-grywalizacja.vercel.app`

### Dane Supabase:
- URL: `https://pdyfxdjmebyfiucwgtco.supabase.co`
- Anon Key: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBkeWZ4ZGptZWJ5Zml1Y3dndGNvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5MzE5OTIsImV4cCI6MjA4NDUwNzk5Mn0.4usEnq3lZlJa6L9ksgBZImAw_IT08jHfTJJyG3LM1Ak`

---

## Jak wznowic sesje

Uruchom Claude Code w folderze projektu i wpisz:

```
Przeczytaj plik SESJA_2026-01-20.md w folderze turbo-grywalizacja i kontynuuj debugowanie problemu z Auth timeout
```

---

## Struktura projektu

```
turbo-grywalizacja/
├── src/
│   ├── app/
│   │   ├── (app)/
│   │   │   ├── admin/page.tsx      # Panel admina z zakladka Druzyny
│   │   │   ├── dashboard/page.tsx  # Dashboard z sekcja druzyny
│   │   │   ├── teams/page.tsx      # Lista druzyn
│   │   │   └── teams/[id]/page.tsx # Szczegoly druzyny
│   │   └── (auth)/
│   │       ├── login/page.tsx
│   │       ├── register/page.tsx
│   │       └── onboarding/page.tsx
│   ├── components/
│   │   └── teams/                  # Komponenty druzynowe
│   ├── hooks/
│   │   ├── useAuth.tsx            # NAPRAWIONY - team_id zamiast class
│   │   └── useTeams.ts            # Hook do druzyn
│   └── types/index.ts             # Typy z Team, TeamMember, etc.
├── supabase/
│   └── schema.sql                 # Schemat bazy danych
└── .env.local                     # Lokalne zmienne (NIE PUSHOWAC!)
```
